{"version":3,"sources":["/library-dist.js"],"names":[],"mappings":"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","file":"library-dist.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  factory((global.MyLibrary = {}));\n}(this, function (exports) { 'use strict';\n\n  let loaded = false;\n  let key = null;\n  let injectedDoc = null;\n  let context = getGlobalContext();\n\n  /**\n   * Set the Intercom API key\n   *\n   * @param newquay\n   */\n  function setKey(newquay) {\n    key = newquay;\n  }\n\n  /**\n   * Set the document, only used for passing\n   * in a mock for testing.\n   *\n   * @param newDocument\n   */\n  function setDocument(newDocument) {\n    injectedDoc = newDocument;\n  }\n\n  function setIntercomFunction(intercomfn) {\n    context.Intercom = intercomfn;\n  }\n\n  /**\n   * Get the document.  Allows us to inject a mock document\n   * for testing outside a browser env.\n   *\n   * @returns {*|HTMLDocument}\n   */\n  function getDocument() {\n    return injectedDoc || document;\n  }\n\n  /**\n   * Intercom library requires an intercom function\n   * on the window.  This function allows us to test this\n   * module outside of a browser environment.\n   *\n   * @returns {*}\n   */\n  function getGlobalContext() {\n    if (typeof window !== 'undefined') {\n      return window;\n    }\n    if (typeof global !== 'undefined') {\n      return global;\n    }\n    return {};\n  }\n\n  /**\n   * Load Intercom scripts from their site.\n   *\n   * @param source\n   */\n  function loadExternalScript(source) {\n    setTimeout(function () {\n      const documentObj = getDocument();\n      const firstScript = documentObj.getElementsByTagName('script')[0];\n      let element = documentObj.createElement('script');\n      element.type = 'text/javascript';\n      element.async = true;\n      element.src = source;\n      firstScript.parentNode.insertBefore(element, firstScript);\n    }, 1);\n  }\n\n  /**\n   * Load intercom library as async file\n   */\n  function setup() {\n\n    if (loaded) {\n      return;\n    }\n\n    if (!key) {\n      console.error('No key set for intercom, use setKey method to define it.');\n      return;\n    }\n\n    if (typeof context.Intercom === 'function') {\n      context.Intercom('reattach_activator');\n      //context.Intercom('update', intercomSettings);\n    } else {\n      var i = function () {\n        i.c(arguments)\n      };\n      i.q = [];\n      i.c = function (args) {\n        i.q.push(args)\n      };\n      context.Intercom = i;\n      function l() {\n        loadExternalScript('https://widget.intercom.io/widget/'+key);\n      }\n\n      if (context.attachEvent) {\n        context.attachEvent('onload', l);\n      } else {\n        context.addEventListener('load', l, false);\n      }\n    }\n\n    loaded = true;\n  }\n\n  /**\n   * On event, fire to intercom\n   */\n  function trackEvent(name, meta) {\n    if (typeof meta == 'object' && Object.keys(meta).length > 5) {\n      console.error('Unable to track an event with more than 5 properties');\n      return;\n    }\n    context.Intercom('trackEvent', name, meta);\n  }\n\n  /**\n   * When user's data changes, set user props\n   * @param meta\n   */\n  function update(meta) {\n    context.Intercom('update', meta);\n  }\n\n  /**\n   * When a user logs out, shutdown intercom\n   * @param meta\n   */\n  function shutdown() {\n    context.Intercom('shutdown');\n  }\n\n  /**\n   * On login, fire event to Intercom\n   */\n  function boot(name, email, created_at, meta) {\n\n    if (typeof meta !== 'object') {\n      meta = {};\n    }\n\n    meta.app_id = key;\n    meta.name = name;\n    meta.email = email;\n    meta.created_at = created_at;\n\n    context.Intercom('boot', meta);\n  }\n\n  function showNewMessage(message) {\n    context.Intercom('showNewMessage', message);\n  }\n\n  function hide() {\n    context.Intercom('hide');\n  }\n\n  var index = {\n    setup, boot, setKey, update, trackEvent, shutdown, showNewMessage, hide\n  };\n\n  exports.setKey = setKey;\n  exports.setDocument = setDocument;\n  exports.setIntercomFunction = setIntercomFunction;\n  exports.setup = setup;\n  exports.trackEvent = trackEvent;\n  exports.update = update;\n  exports.shutdown = shutdown;\n  exports.boot = boot;\n  exports.showNewMessage = showNewMessage;\n  exports.hide = hide;\n  exports['default'] = index;\n\n}));"]}